{% extends "base.html" %}

{% block title %}–î–∞—à–±–æ—Ä–¥ ‚Äî Photo28 Admin{% endblock %}

{% block content %}
<h1 style="margin-bottom: 2rem;">üìä –î–∞—à–±–æ—Ä–¥</h1>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-value">{{ stats.total_orders }}</div>
        <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" style="color: #f59e0b;">{{ stats.pending_payment }}</div>
        <div class="stat-label">–û–∂–∏–¥–∞—é—Ç –æ–ø–ª–∞—Ç—ã</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" style="color: #10b981;">{{ stats.paid }}</div>
        <div class="stat-label">–û–ø–ª–∞—á–µ–Ω–æ</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" style="color: #3b82f6;">{{ stats.printing }}</div>
        <div class="stat-label">–í –ø–µ—á–∞—Ç–∏</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" style="color: #8b5cf6;">{{ stats.shipped }}</div>
        <div class="stat-label">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ</div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">üíæ –•—Ä–∞–Ω–∏–ª–∏—â–µ</h2>
    </div>
    <div class="order-meta">
        <div class="meta-item">
            <span class="meta-label">–†–∞–∑–º–µ—Ä</span>
            <span class="meta-value">{{ storage.total_size_mb }} –ú–ë</span>
        </div>
        <div class="meta-item">
            <span class="meta-label">–§–∞–π–ª–æ–≤</span>
            <span class="meta-value">{{ storage.file_count }}</span>
        </div>
        <div class="meta-item">
            <span class="meta-label">–ó–∞–∫–∞–∑–æ–≤ –Ω–∞ –¥–∏—Å–∫–µ</span>
            <span class="meta-value">{{ storage.orders_count }}</span>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã</h2>
        <a href="/orders" class="btn btn-secondary btn-sm">–í—Å–µ –∑–∞–∫–∞–∑—ã ‚Üí</a>
    </div>
    
    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th>–ù–æ–º–µ—Ä</th>
                    <th>–ö–ª–∏–µ–Ω—Ç</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–§–æ—Ç–æ</th>
                    <th>–°—É–º–º–∞</th>
                    <th>–î–∞—Ç–∞</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                <tr>
                    <td><strong>{{ order.order_number }}</strong></td>
                    <td>{{ order.user.display_name if order.user else '‚Äî' }}</td>
                    <td>
                        <span class="badge badge-{{ order.status.value }}">{{ order.status.display_name }}</span>
                    </td>
                    <td>{{ order.photos_count }} —à—Ç.</td>
                    <td>{{ order.total_cost }}‚ÇΩ</td>
                    <td>{{ order.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
                    <td>
                        <a href="/orders/{{ order.id }}" class="btn btn-secondary btn-sm">–û—Ç–∫—Ä—ã—Ç—å</a>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="7" style="text-align: center; color: var(--text-muted);">
                        –ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

