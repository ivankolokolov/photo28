{% extends "base.html" %}

{% block title %}–ó–∞–∫–∞–∑—ã ‚Äî Photo28 Admin{% endblock %}

{% block content %}
<h1 style="margin-bottom: 2rem;">üìã –ó–∞–∫–∞–∑—ã</h1>

<div class="filter-tabs">
    <a href="/orders" class="filter-tab {% if not current_status %}active{% endif %}">–í—Å–µ</a>
    <a href="/orders?status=pending_payment" class="filter-tab {% if current_status == 'pending_payment' %}active{% endif %}">‚è≥ –û–∂–∏–¥–∞—é—Ç –æ–ø–ª–∞—Ç—ã</a>
    <a href="/orders?status=paid" class="filter-tab {% if current_status == 'paid' %}active{% endif %}">‚úÖ –û–ø–ª–∞—á–µ–Ω—ã</a>
    <a href="/orders?status=printing" class="filter-tab {% if current_status == 'printing' %}active{% endif %}">üñ® –í –ø–µ—á–∞—Ç–∏</a>
    <a href="/orders?status=ready" class="filter-tab {% if current_status == 'ready' %}active{% endif %}">üì¶ –ì–æ—Ç–æ–≤—ã</a>
    <a href="/orders?status=shipped" class="filter-tab {% if current_status == 'shipped' %}active{% endif %}">üöö –û—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã</a>
</div>

<div class="card">
    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th>–ù–æ–º–µ—Ä</th>
                    <th>–ö–ª–∏–µ–Ω—Ç</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–î–æ—Å—Ç–∞–≤–∫–∞</th>
                    <th>–§–æ—Ç–æ</th>
                    <th>–°—É–º–º–∞</th>
                    <th>–î–∞—Ç–∞</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                <tr>
                    <td><strong>{{ order.order_number }}</strong></td>
                    <td>
                        {{ order.user.display_name if order.user else '‚Äî' }}
                        {% if order.user and order.user.username %}
                        <br><small style="color: var(--text-muted);">@{{ order.user.username }}</small>
                        {% endif %}
                    </td>
                    <td>
                        <span class="badge badge-{{ order.status.value }}">{{ order.status.display_name }}</span>
                    </td>
                    <td>{{ order.delivery_type.display_name if order.delivery_type else '‚Äî' }}</td>
                    <td>{{ order.photos_count }} —à—Ç.</td>
                    <td>{{ order.total_cost }}‚ÇΩ</td>
                    <td>{{ order.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
                    <td>
                        <a href="/orders/{{ order.id }}" class="btn btn-secondary btn-sm">–û—Ç–∫—Ä—ã—Ç—å</a>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="8" style="text-align: center; color: var(--text-muted);">
                        –ó–∞–∫–∞–∑–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

