{% extends "base.html" %}

{% block title %}–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Äî Photo28 Admin{% endblock %}

{% block content %}
<h1 style="margin-bottom: 2rem;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>

{% if saved %}
<div class="card" style="background: rgba(16, 185, 129, 0.1); border-color: var(--success); margin-bottom: 1.5rem;">
    <p style="margin: 0; color: var(--success);">‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!</p>
</div>
{% endif %}

<form method="POST" action="/settings">
    {% for group_key, settings_list in grouped_settings.items() %}
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">{{ group_names.get(group_key, group_key) }}</h2>
        </div>
        
        <div class="settings-list">
            {% for setting in settings_list %}
            <div class="setting-item">
                <div class="setting-label">
                    <label for="setting_{{ setting.key }}">{{ setting.display_name }}</label>
                    {% if setting.description %}
                    <span class="setting-description">{{ setting.description }}</span>
                    {% endif %}
                </div>
                <div class="setting-input">
                    {% if setting.key == 'preview_mode' %}
                    <select class="form-input" id="setting_{{ setting.key }}" name="setting_{{ setting.key }}">
                        <option value="thumbnail" {% if setting.value == 'thumbnail' %}selected{% endif %}>
                            thumbnail ‚Äî –∫–∞–∫ —Ñ–æ—Ç–æ
                        </option>
                        <option value="document" {% if setting.value == 'document' %}selected{% endif %}>
                            document ‚Äî –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç
                        </option>
                    </select>
                    {% elif setting.value_type.value == 'boolean' %}
                    <select class="form-input" id="setting_{{ setting.key }}" name="setting_{{ setting.key }}">
                        <option value="true" {% if setting.value.lower() in ['true', '1', 'yes', '–¥–∞'] %}selected{% endif %}>–î–∞</option>
                        <option value="false" {% if setting.value.lower() not in ['true', '1', 'yes', '–¥–∞'] %}selected{% endif %}>–ù–µ—Ç</option>
                    </select>
                    {% elif setting.value_type.value == 'text' %}
                    <textarea class="form-input" id="setting_{{ setting.key }}" name="setting_{{ setting.key }}" rows="3">{{ setting.value }}</textarea>
                    {% elif setting.value_type.value == 'integer' %}
                    <input type="number" class="form-input" id="setting_{{ setting.key }}" name="setting_{{ setting.key }}" value="{{ setting.value }}">
                    {% else %}
                    <input type="text" class="form-input" id="setting_{{ setting.key }}" name="setting_{{ setting.key }}" value="{{ setting.value }}">
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
    
    <div style="display: flex; justify-content: flex-end; margin-top: 1rem;">
        <button type="submit" class="btn btn-primary" style="padding: 1rem 2rem; font-size: 1rem;">
            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        </button>
    </div>
</form>

<div class="card" style="background: rgba(16, 185, 129, 0.1); border-color: var(--success); margin-top: 2rem;">
    <p style="margin: 0; color: var(--text-muted); font-size: 0.875rem;">
        <strong style="color: var(--success);">‚úì</strong> 
        –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
    </p>
</div>

<style>
.settings-list {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.setting-item {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    align-items: start;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--border);
}

.setting-item:last-child {
    padding-bottom: 0;
    border-bottom: none;
}

.setting-label {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.setting-label label {
    font-weight: 500;
    font-size: 0.9375rem;
    color: var(--text);
}

.setting-description {
    font-size: 0.75rem;
    color: var(--text-muted);
    line-height: 1.4;
}

.setting-input {
    width: 100%;
}

.setting-input .form-input {
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 0.9375rem;
}

.setting-input select.form-input {
    cursor: pointer;
}

.setting-input textarea.form-input {
    min-height: 100px;
    resize: vertical;
}

@media (max-width: 768px) {
    .setting-item {
        grid-template-columns: 1fr;
        gap: 0.75rem;
    }
}
</style>
{% endblock %}
