{% extends "base.html" %}

{% block title %}–ù–∞—Å—Ç—Ä–æ–π–∫–∏{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
</div>

{% if saved %}
<div class="alert alert-success alert-dismissible fade show" role="alert">
    ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
{% endif %}

<form method="POST" action="/settings">
    {% for group_key, settings_list in grouped_settings.items() %}
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">{{ group_names.get(group_key, group_key) }}</h5>
        </div>
        <div class="card-body">
            {% for setting in settings_list %}
            <div class="mb-3 row">
                <label for="setting_{{ setting.key }}" class="col-sm-4 col-form-label">
                    {{ setting.display_name }}
                </label>
                <div class="col-sm-8">
                    {% if setting.key == 'preview_mode' %}
                    <select class="form-select" id="setting_{{ setting.key }}" name="setting_{{ setting.key }}">
                        <option value="thumbnail" {% if setting.value == 'thumbnail' %}selected{% endif %}>
                            thumbnail ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ —Ñ–æ—Ç–æ (–º–µ–¥–ª–µ–Ω–Ω–µ–µ)
                        </option>
                        <option value="document" {% if setting.value == 'document' %}selected{% endif %}>
                            document ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç (–±—ã—Å—Ç—Ä–µ–µ)
                        </option>
                    </select>
                    {% elif setting.value_type.value == 'boolean' %}
                    <select class="form-select" id="setting_{{ setting.key }}" name="setting_{{ setting.key }}">
                        <option value="true" {% if setting.value.lower() in ['true', '1', 'yes', '–¥–∞'] %}selected{% endif %}>–î–∞</option>
                        <option value="false" {% if setting.value.lower() not in ['true', '1', 'yes', '–¥–∞'] %}selected{% endif %}>–ù–µ—Ç</option>
                    </select>
                    {% elif setting.value_type.value == 'text' %}
                    <textarea class="form-control" id="setting_{{ setting.key }}" name="setting_{{ setting.key }}" rows="3">{{ setting.value }}</textarea>
                    {% elif setting.value_type.value == 'integer' %}
                    <input type="number" class="form-control" id="setting_{{ setting.key }}" name="setting_{{ setting.key }}" value="{{ setting.value }}">
                    {% else %}
                    <input type="text" class="form-control" id="setting_{{ setting.key }}" name="setting_{{ setting.key }}" value="{{ setting.value }}">
                    {% endif %}
                    {% if setting.description %}
                    <div class="form-text text-muted">{{ setting.description }}</div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
    
    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
        <button type="submit" class="btn btn-primary btn-lg">
            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        </button>
    </div>
</form>

<div class="alert alert-info mt-4">
    <strong>‚ÑπÔ∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.
</div>
{% endblock %}

