{% extends "base.html" %}

{% block title %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º ‚Äî Photo28 Admin{% endblock %}

{% block content %}
<h1 style="margin-bottom: 2rem;">ü§ñ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º</h1>

{% if action == 'restart_requested' %}
<div class="card" style="background: rgba(245, 158, 11, 0.1); border-color: var(--warning); margin-bottom: 1.5rem;">
    <p style="margin: 0; color: var(--warning);">‚è≥ –ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω. –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 10 —Å–µ–∫—É–Ω–¥.</p>
</div>
{% elif action == 'scheduled' %}
<div class="card" style="background: rgba(16, 185, 129, 0.1); border-color: var(--success); margin-bottom: 1.5rem;">
    <p style="margin: 0; color: var(--success);">‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω!</p>
</div>
{% elif action == 'cancelled' %}
<div class="card" style="background: rgba(99, 102, 241, 0.1); border-color: var(--accent); margin-bottom: 1.5rem;">
    <p style="margin: 0; color: var(--accent);">‚ùå –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –æ—Ç–º–µ–Ω—ë–Ω.</p>
</div>
{% endif %}

<!-- –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title">üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å</h2>
    </div>
    
    <div class="status-grid">
        <div class="status-item">
            <span class="status-label">–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∑–∞–ø—Ä–æ—à–µ–Ω</span>
            <span class="status-value {% if restart_requested %}status-warning{% else %}status-ok{% endif %}">
                {% if restart_requested %}‚è≥ –î–∞{% else %}‚úì –ù–µ—Ç{% endif %}
            </span>
        </div>
        <div class="status-item">
            <span class="status-label">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫</span>
            <span class="status-value {% if scheduled_time %}status-info{% else %}status-ok{% endif %}">
                {% if scheduled_time %}
                üïê {{ scheduled_time.strftime('%d.%m.%Y –≤ %H:%M') }}
                {% else %}
                ‚Äî –ù–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω
                {% endif %}
            </span>
        </div>
    </div>
</div>

<!-- –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title">üîÑ –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫</h2>
    </div>
    
    <div class="warning-box">
        <p><strong>‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ!</strong></p>
        <ul>
            <li>–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±—É–¥—É—Ç –ø—Ä–µ—Ä–≤–∞–Ω—ã</li>
            <li>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–∏–¥—ë—Ç—Å—è –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ —Å /start</li>
            <li>–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ –∏ –∑–∞–∫–∞–∑—ã –≤ –±–∞–∑–µ <strong>—Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è</strong></li>
            <li>–ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã (–¥–æ –æ–ø–ª–∞—Ç—ã) –ø–æ—Ç—Ä–µ–±—É—é—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</li>
        </ul>
    </div>
    
    <form method="POST" action="/bot-control/restart-now" onsubmit="return confirm('‚ö†Ô∏è –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ —Å–µ–π—á–∞—Å?\n\n–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –±—É–¥—É—Ç –ø—Ä–µ—Ä–≤–∞–Ω—ã.\n–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–∏–¥—ë—Ç—Å—è –Ω–∞—á–∞—Ç—å —Å /start.\n\n–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')">
        <button type="submit" class="btn btn-danger" style="width: 100%;">
            üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ–π—á–∞—Å
        </button>
    </form>
</div>

<!-- –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title">üåô –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫</h2>
    </div>
    
    <p style="color: var(--text-muted); margin-bottom: 1rem;">
        –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–µ–Ω—å—à–µ –≤—Å–µ–≥–æ.
    </p>
    
    <form method="POST" action="/bot-control/schedule-restart" class="schedule-form">
        <div class="form-group">
            <label class="form-label">–í—Ä–µ–º—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞</label>
            <select name="hour" class="form-input" style="width: auto;">
                <option value="3">03:00</option>
                <option value="4">04:00</option>
                <option value="5" selected>05:00</option>
                <option value="6">06:00</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary">
            üåô –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–æ—á—å
        </button>
    </form>
    
    {% if scheduled_time or restart_requested %}
    <hr style="border-color: var(--border); margin: 1.5rem 0;">
    <form method="POST" action="/bot-control/cancel-restart">
        <button type="submit" class="btn btn-secondary" style="width: 100%;">
            ‚ùå –û—Ç–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
        </button>
    </form>
    {% endif %}
</div>

<style>
.status-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
}

.status-item {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 1rem;
    background: var(--bg-hover);
    border-radius: 8px;
}

.status-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.status-value {
    font-size: 1rem;
    font-weight: 500;
}

.status-ok { color: var(--success); }
.status-warning { color: var(--warning); }
.status-info { color: var(--info); }

.warning-box {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid var(--danger);
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
}

.warning-box p {
    color: var(--danger);
    margin-bottom: 0.5rem;
}

.warning-box ul {
    margin: 0;
    padding-left: 1.25rem;
    color: var(--text-muted);
    font-size: 0.875rem;
}

.warning-box li {
    margin-bottom: 0.25rem;
}

.schedule-form {
    display: flex;
    gap: 1rem;
    align-items: flex-end;
}

.schedule-form .form-group {
    margin-bottom: 0;
}
</style>
{% endblock %}

